# HTTP1.1请求分类
HTTP请求可以大体上从不同方面分为几类，这其中包括：

- 安全/非安全请求
- 幂等/非幂等请求
- 简单/非简单请求

本文就来分析一下。

### 一、 安全/非安全请求
按照已经建立的惯例，GET、HEAD方法不应该采取除“获取”以外的其它行为，所以他们通常被认为是安全请求，其它请求可视为非安全请求。

>注意，HTTP协议并没有强制要求必须这样实现。

### 二、幂等/非幂等请求
如果相同的请求被多次执行产生的效果是一样的，那么这样的请求被视为幂等的。 符合这个特性的请求有GET、HEAD、PUT、DELETE、OPTIONS和TRACE请求，所以他们是幂等的。其他请求可视为非幂等请求。

### 三、 简单/非简单请求
简单/非简单请求其实是在跨域的时候做的区分，在同时满足下面2大条件时，浏览器认为该请求是简单CORS请求：

(1)请求方法是以下之一
- GET
- HEAD
- POST

(2) HTTP头只能包含以下字段
- Accept
- Accept-Language
- Content-Language
- Last-Event-ID
- 值为`application/x-www-form-urlencoded`或`multipart/form-data`或`text/plain`的Content-Type

不同时满足以上2大条件的都被视为非简单CORS请求，这其中可对应为：

- 请求方法为GET/HEAD/POST之外的方法
- 请求头包含其它，这其中最常见的几种情况是1、Content-Type为application/json。 2、请求头中包含**自定义头**。

针对不同的CORS请求，浏览器的行为也不一样：


- 对于简单请求，浏览器直接发出CORS请求。 在头信息之中，会增加一个Origin字段。 服务端正常的返回，响应头中有没有CORS的那几个字段决定了跨域有没成功。
- 对于非简单请求，浏览器会在发出请求前先发送一个OPTIONS的“预请求”，当预请求通过后，浏览器会自动的发送我们的真实请求。

#####这里面需要注意的是，对于非简单请求，要想让请求通过，需要同时在预请求和真实请求的响应头中加上CORS字段。

比如，前端发起一个带自定义头的GET请求，那么浏览器会先发出一个OPTIONS请求，OPTIONS请求通过后会再出起这个GET请求，要想顺利的拿到GET请求的结果，服务端需要同时对OPTIONS和GET请求的响应设置CORS头。